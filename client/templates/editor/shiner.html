<template name="bodyCont">
  <div id="splitter">
    <div class="splitter-west">
      {{> listFrameworks}} 
      <a class="point" id="addF">+</a>

      {{#if builder}}
        {{> listTemplates children=children}}
      {{else}}
        {{> listTemplates children=apps showbtn="true"}}
      {{/if}}
      <button class="circular ui icon button" id="addTT">
        <i class="icon ellipsis horizontal"></i> <i class="icon plus"></i>
      </button>
      <button class="circular ui icon button" id="editForm">
          <i class="icon edit"></i>
      </button>


    </div>
    <div class="splitter-east">
      {{#if appname}}
        {{#if builder}}
          <iframe frameborder="0" scrolling="auto" src="/container/{{appname}}{{#if page}}/{{page}}{{/if}}{{#if fr}}?fr={{fr}}{{/if}}" width="{{iwidth}}" height="{{iheight}}"></iframe>
        {{else}}
          <div class="sh-prev-cont" style="width:{{prevwidth}}px !important; height:{{prevheight}}px !important;">
            <iframe frameborder="0" scrolling="auto" src="/preview/{{appname}}{{#if page}}/{{page}}{{/if}}{{#if fr}}?fr={{fr}}{{/if}}" width="{{prevwidth}}" height="{{prevheight}}"></iframe>
          </div>
        {{/if}}
      {{/if}}
      
    </div>

    {{> modaladd}}
    
  </div>  
</template>

<template name="listTemplates">
  {{#each children}}
    {{#if hasChildren }}
      <div class="item">
      <div class="header"  id="{{_id}}">{{name}}</div>
      <div class="sh-menu">
        {{> Template.dynamic template="listTemplates" data=this }}  
      </div>
        </div>
    {{else}}
      <div class="item point" id="{{_id}}">
        {{name}}
        {{#if showbtn}}
          <button class="sh-btn">-></button>
        {{/if}}
      </div>
    {{/if}}
  {{/each}}
</template>


<template name="listFrameworks">
  <select id="frameSel">
    {{#each frameworks}}
      <option value="{{this._id}}" data-root="{{this.root}}">{{this.name}}</option>
    {{/each}}
  </select>
</template>

<template name="modaladd">
  <div class="ui modal" id="modal">
    <div class="header"></div>
    <div class="content">
      <p>
        {{#if equals tt "template"}}
        {{> insertTemplateForm}}
        {{/if}}
        {{#if equals tt "container"}}
        {{> insertContainerForm}}
        {{/if}}
        {{#if equals tt "page"}}
        {{> insertPageForm}}
        {{/if}}
        {{#if equals tt "framework"}}
        {{> insertFrameworkForm}}
        {{/if}}
      </p>
    </div>
    <div class="actions">
      <div class="ui approve button">Done</div>
      <div class="ui cancel button">Cancel</div>
    </div>
  </div>
</template>
